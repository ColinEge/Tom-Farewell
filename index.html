<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farewell Tom</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <style>
        .message-container {
            position: relative;
            height: 100vh;
            overflow: hidden;
            margin: 2rem 0;
        }

        .message {
            position: absolute;
            width: 100%;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            font-style: italic;
            text-align: center;
        }

        .active {
            opacity: 1;
            transform: translateY(0);
        }

        .author {
            display: block;
            text-align: right;
            margin-top: 0.5rem;
            font-weight: bold;
            color: #555;
        }
    </style>
</head>

<body>
    <section class="hero">
        <div class="hero-body has-text-centered">
            <div class="container">
                <h1 class="title">Farewell Tom</h1>
                <h2 class="subtitle">Thanks for everything you have done for us at the Hangar</h2>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="columns is-mobile is-vcentered is-justify-content-center">
            <div class="column is-narrow">
                <img onclick="onPrevClick(this)" width="20vw" src="media/prev.svg" />
            </div>
            <div class="column is-narrow">
                <img onclick="onPauseClick(this)" width="20vw" src="media/pause.svg" />
            </div>
            <div class="column is-narrow">
                <img onclick="onNextClick(this)" width="20vw" src="media/next.svg" />
            </div>
        </div>
        <div class="container">
            <div class="message-container" id="message-container"></div>
        </div>

    </section>

    <script>
        const messageTexts = [
            {
                message: `Thanks you for all of your help, friendship and mentorship! I appreciate everything you have done for me both professionally and personally!`,
                from: `Colin`
            },
            {
                message: `Tom, thank you for everything and best wishes for the future. I have really appreciated all your support and insight over the past few years. I think you know I have leaned on you for your tech expertise, but you might not realise how many times I've taken inspiration from you as a Dad. The kids are too young at the moment for me to bring some of this to life, but there have been a number of occasions I've thought "I wanna be like that with the kids" or "I wanna do that with Max in a few years". So thank you for being an unwitting mentor. You are smart, chilled and mindful of others. I've said it before but it hasn't been lost on me how much effort you make to ensure everybody is heard in meetings and not just the blow-hards like me. You're the man, and whatever the future holds, I have no doubt at all that you will roundhouse kick it in the face.`,
                from: `Lewis`
            },
            {
                message: `Salesforce was tough, but I think parenthood will be more messy. Please can you come round and support me with that please?!`,
                from: `Holly`
            },
            {
                message: `Thanks Tom for join us the past few years it's been a joy! Good luck with everything in the future and hope you have a great time on your travels throughout the next year or so! I will miss taking inspo from your funky nails! Takk!`,
                from: `K`
            },
            {
                message: `Thank you so much, Tom, for your monumental contributions to The Hangar. We are really grateful for everything you have worked on and helped with and your ability to solve the most complex problems. You'll be missed, and good luck with whatever adventure comes next!`,
                from: `Hannah`
            },             
            {
                message: `Hey Tom, I'd like to say that its been a pleasure working with you, but if I did, I'd be lying!. Its been a blast and the impact you have made cannot be measured. Now if some IT breaks, we will have to revert to turning it off and back on again!! Much love.`,
                from: `Oz`
            },             
            
        ];

        const messageContainer = document.getElementById('message-container');
        const messages = document.querySelectorAll('.message');
        let lastMessageLength = 0;
        let currentIndex = 0;
        let timeoutID;


        for (let i = messageTexts.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            const temp = messageTexts[i];
            messageTexts[i] = messageTexts[j];
            messageTexts[j] = temp;
        }
        messageTexts.forEach((message, index) => {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message' + (index === 0 ? ' active' : '');
            messageDiv.innerHTML = `"${message.message}"<span class="author">-${message.from}</span>`;
            messageContainer.appendChild(messageDiv);
        });

        function calculateWaitTime(charCount) {
            return charCount <= 50 ? 3000 : Math.max(3000, charCount * 50);
        }

        function showPreviousMessage() {
            const messages = document.querySelectorAll('.message');
            messages[currentIndex].classList.remove('active');
            currentIndex = (currentIndex - 1 + messages.length) % messages.length;
            messages[currentIndex].classList.add('active');
            return messages[currentIndex].childNodes[0].nodeValue.trim();
        }

        function showNextMessage() {
            const messages = document.querySelectorAll('.message');
            messages[currentIndex].classList.remove('active');
            currentIndex = (currentIndex + 1) % messages.length;
            messages[currentIndex].classList.add('active');
            return messages[currentIndex].childNodes[0].nodeValue.trim();
        }

        function autoShowNextMessage() {
            const message = showNextMessage();
            lastMessageLength = message.length;
            timeoutID = setTimeout(autoShowNextMessage, calculateWaitTime(lastMessageLength));
        }

        function onPrevClick(el) {
            showPreviousMessage()
        }

        function onPauseClick(el) {
            if (el.src.indexOf('media/pause.svg') !== -1) {
                el.src = 'media/play.svg';
                clearTimeout(timeoutID);
                isPaused = true;
            } else {
                autoShowNextMessage();
                el.src = 'media/pause.svg';
            }
        }

        function onNextClick(el) {
            showNextMessage()
        }

        timeoutID = setTimeout(autoShowNextMessage, calculateWaitTime(messageTexts[0].message.length));
    </script>
</body>

</html>